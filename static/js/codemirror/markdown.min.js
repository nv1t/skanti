CodeMirror.defineMode("markdown",function(y,k){var g=CodeMirror.getMode(y,{name:"xml",htmlMode:true});var u="header",b="code",x="quote",w="list",B="hr",p="linktext",A="linkhref",e="em",h="strong",s="emstrong";var C=/^[*-=_]/,m=/^[*-+]\s+/,q=/^[0-9]\.\s+/,l=/^(?:\={3,}|-{3,})$/,v=/^(k:\t|\s{4,})/,d=/^[^\[*_\\<>`]+/;function c(F,E,D){E.f=E.inline=D;return D(F,E)}function o(F,E,D){E.f=E.block=D;return D(F,E)}function j(G,F){if(G.match(v)){G.skipToEnd();return b}if(G.eatSpace()){return null}if(G.peek()==="#"||G.match(l)){G.skipToEnd();return u}if(G.eat(">")){F.indentation++;return x}if(G.peek()==="<"){return o(G,F,t)}if(G.peek()==="["){return c(G,F,i)}if(C.test(G.peek())){var E=new RegExp("(?:s*["+G.peek()+"]){3,}$");if(G.match(E,true)){return B}}var D;if(D=G.match(m,true)||G.match(q,true)){F.indentation+=D[0].length;return w}return c(G,F,F.inline)}function t(F,E){var D=g.token(F,E.htmlState);if(F.eol()&&!E.htmlState.context){E.block=j}return D}function n(H,F){function G(){return F.strong?(F.em?s:h):(F.em?e:null)}if(H.match(d,true)){return G()}var E=H.next();if(E==="\\"){H.next();return G()}if(E==="`"){return c(H,F,r(b,"`"))}if(E==="<"){return c(H,F,r(p,">"))}if(E==="["){return c(H,F,z)}var D=G();if(E==="*"||E==="_"){if(H.eat(E)){return(F.strong=!F.strong)?G():D}return(F.em=!F.em)?G():D}return G()}function z(F,E){while(!F.eol()){var D=F.next();if(D==="\\"){F.next()}if(D==="]"){E.inline=E.f=f;return p}}return p}function f(F,E){F.eatSpace();var D=F.next();if(D==="("||D==="["){return c(F,E,r(A,D==="("?")":"]"))}return"error"}function i(E,D){if(E.match(/^[^\]]*\]:/,true)){D.f=a;return p}return c(E,D,n)}function a(E,D){E.eatSpace();E.match(/^[^\s]+/,true);D.f=D.inline=n;return A}function r(E,F,D){D=D||n;return function(I,H){while(!I.eol()){var G=I.next();if(G==="\\"){I.next()}if(G===F){H.inline=H.f=D;return E}}return E}}return{startState:function(){return{f:j,block:j,htmlState:g.startState(),indentation:0,inline:n,em:false,strong:false}}¬copyState:function(D){return{f:D.f,block:D.block,htmlState:CodeMirror.copyState(g,D.htmlState),indentation:D.indentation,inline:D.inline,em:D.em,strong:D.strong}},token:function(G,F){if(G.sol()){F.f=F.block;var E=F.indentation,D=0;while(E>0){if(G.eat(" ")){E--;D++}else{if(E>=4&&G.eat("\t")){E-=4;D+=4}else{break}}}F.indentation=D;if(D>0){return null}}return F.f(G,F)}}});CodeMirror.defineMIME("text/x-markdown","markdown");