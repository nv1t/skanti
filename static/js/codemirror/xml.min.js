CodeMirror.defineMode("xml",function(w,k){var p=w.indentUnit;var v=k.htmlMode?{autoSelfClosers:{br:true,img:true,hr:true,link:true,input:true,meta:true,col:true,frame:true,base:true,area:true},doNotIndent:{pre:true,"!cdata":true},allowUnquoted:true}:{autoSelfClosers:{},doNotIndent:{"!cdata":true},allowUnquoted:false};var a=k.alignCDATA;var f,g;function o(A,z){function x(C){z.tokenize=C;return C(A,z)}var y=A.next();if(y=="<"){if(A.eat("!")){if(A.eat("[")){if(A.match("CDATA[")){return x(u("atom","]]>"))}else{return null}}else{if(A.match("--")){return x(u("comment","-->"))}else{if(A.match("DOCTYPE",true,true)){A.eatWhile(/[\w\._\-]/);return x(u("meta",">"))}else{return null}}}}else{if(A.eat("?")){A.eatWhile(/[\w\._\-]/);z.tokenize=u("meta","?>");return"meta"}else{g=A.eat("/")?"closeTag":"openTag";A.eatSpace();f="";var B;while((B=A.eat(/[^\s\u00a0=<>\"\'\/?]/))){f+=B}z.tokenize=n;return"tag"}}}else{if(y=="&"){A.eatWhile(/[^;]/);A.eat(";");return"atom"}else{A.eatWhile(/[^&<]/);return null}}}function n(z,y){var x=z.next();if(x==">"||(x=="/"&&z.eat(">"))){y.tokenize=o;g=x==">"?"endTag":"selfcloseTag";return"tag"}else{if(x=="="){g="equals";return null}else{if(/[\'\"]/.test(x)){y.tokenize=j(x);return y.tokenize(z,y)}else{z.eatWhile(/[^\s\u00a0=<>\"\'\/?]/);return"word"}}}}function j(x){return function(z,y){while(!z.eol()){if(z.next()==x){y.tokenize=n;break}}return"string"}}function u(y,x){return function(A,z){while(!A.eol()){if(A.match(x)){z.tokenize=o;break}A.next()}return y}}var l,h;function b(){for(var x=arguments.length-1;x>=0;x--){l.cc.push(arguments[x])}}function e(){b.apply(null,arguments);return true}function i(x,z){var y=v.doNotIndent.hasOwnProperty(x)||(l.context&&l.context.noIndent);l.context={prev:l.context,tagName:x,indent:l.indented,startOfLine:z,noIndent:y}}function s(){if(l.context){l.context=l.context.prev}}function d(x){if(x=="openTag"){l.tagName=f;return e(m,c(l.startOfLine))}else{if(x=="closeTag"){var y=false;if(l.context){y=l.context.tagName!=f}else{y=true}if(y){h="error"}return e(q(y))}else{if(x=="string"){if(!l.context||l.context.name!="!cdata"){i("!cdata")}if(l.tokenize==o){s()}return e()}else{return e()}}}}function c(x){return function(y){if(y=="selfcloseTag"||(y=="endTag"&&v.autoSelfClosers.hasOwnProperty(l.tagName.toLowerCase()))){return e()}if(y=="endTag"){i(l.tagName,x);return e()}return e()}}function q(x){return function(y){if(x){h="error"}if(y=="endTag"){s();return e()}h="error";return e(arguments.callee)}}function m(x){if(x=="word"){h="attribute";return e(m)}if(x=="equals"){return e(t,m)}return b()}function t(x){if(x=="word"&&v.allowUnquoted){h="string";return e()}if(x=="string"){return e(r)}return b()}function r(x){if(x=="string"){return e(r)}else{return b()}}return{startState:function(){return{tokenize:o,cc:[],indented:0,startOfLine:true,tagName:null,context:null}},token:function(A,z){if(A.sol()){z.startOfLine=true;z.indented=A.indentation()}if(A.eatSpace()){return null}h=g=f=null;var y=z.tokenize(A,z);if((y||g)&&y!="comment"){l=z;while(true){var x=z.cc.pop()||d;if(x(g||y)){break}}}z.startOfLine=false;return h||y},indent:function(z,x){var y=z.context;if(y&&y.noIndent){return 0}if(a&&/<!\[CDATA\[/.test(x)){return 0}if(y&&/^<\//.test(x)){y=y.prev}while(y&&!y.startOfLine){y=y.prev}if(y){return y.indent+p}else{return 0}},compareStates:function(A,y){if(A.indented!=y.indented){return false}for(var z=A.context,x=y.context;;z=z.prev,x=x.prev){if(!z||!x){return z==x}if(z.tagName!=x.tagName){return false}}},electricChars:"/"}});CodeMirror.defineMIME("application/xml","xml");CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:true});